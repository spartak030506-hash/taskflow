# Техническое задание: Платформа управления проектами и задачами

## 1. Общее описание проекта

Разработать REST API для платформы управления проектами, которая позволяет командам создавать проекты, управлять задачами, отслеживать прогресс и взаимодействовать в режиме реального времени.

## 2. Роли пользователей

- **Гость** — неавторизованный пользователь
- **Пользователь** — зарегистрированный пользователь
- **Участник проекта** — пользователь, добавленный в проект
- **Менеджер проекта** — участник с правами управления проектом
- **Владелец проекта** — создатель проекта
- **Администратор** — полный доступ ко всей системе

## 3. Основные сущности

### 3.1 Пользователь (User)
- Email (уникальный)
- Имя, фамилия
- Аватар
- Дата регистрации
- Статус активности (online/offline)
- Последняя активность

### 3.2 Проект (Project)
- Название
- Описание
- Владелец
- Дата создания
- Дедлайн
- Статус (active, archived, completed)
- Цвет/иконка для визуализации
- Настройки приватности (публичный/приватный)

### 3.3 Участник проекта (ProjectMember)
- Пользователь
- Проект
- Роль в проекте (owner, manager, member, viewer)
- Дата добавления

### 3.4 Задача (Task)
- Название
- Описание
- Проект
- Создатель
- Исполнитель (assignee)
- Статус (todo, in_progress, review, done)
- Приоритет (low, medium, high, critical)
- Дата создания
- Дедлайн
- Время выполнения (оценка и фактическое)
- Порядковый номер в проекте
- Родительская задача (для подзадач)

### 3.5 Комментарий (Comment)
- Задача
- Автор
- Текст
- Дата создания
- Дата редактирования
- Вложения

### 3.6 Вложение (Attachment)
- Файл
- Название
- Размер
- Тип файла
- Загрузивший пользователь
- Связь с задачей/комментарием
- Дата загрузки

### 3.7 Метка (Tag)
- Название
- Цвет
- Проект
- Связь с задачами (many-to-many)

### 3.8 Уведомление (Notification)
- Пользователь-получатель
- Тип уведомления
- Текст
- Связанный объект (задача, комментарий, проект)
- Статус прочтения
- Дата создания

### 3.9 История активности (ActivityLog)
- Пользователь
- Действие (created, updated, deleted, commented и т.д.)
- Объект действия
- Детали изменений
- Дата и время

## 4. Функциональные требования

### 4.1 Аутентификация и авторизация
- Регистрация пользователя (email + пароль)
- Подтверждение email
- Вход через JWT токены (access + refresh)
- Восстановление пароля
- OAuth2 аутентификация (Google, GitHub)
- Выход (отзыв токена)

### 4.2 Управление профилем
- Просмотр профиля
- Редактирование профиля
- Загрузка/изменение аватара
- Изменение пароля
- Просмотр своей активности

### 4.3 Управление проектами
- Создание проекта
- Просмотр списка проектов (своих и где участник)
- Просмотр деталей проекта
- Редактирование проекта (для owner/manager)
- Архивация/удаление проекта (для owner)
- Поиск проектов по названию и описанию
- Фильтрация по статусу

### 4.4 Управление участниками проекта
- Добавление участников по email
- Изменение роли участника
- Удаление участника
- Просмотр списка участников
- Приглашения в проект (генерация ссылки-инвайта)

### 4.5 Управление задачами
- Создание задачи
- Просмотр списка задач проекта
- Просмотр деталей задачи
- Редактирование задачи
- Удаление задачи
- Назначение исполнителя
- Изменение статуса
- Изменение приоритета
- Создание подзадач
- Добавление/удаление меток
- Перемещение задачи между проектами
- Drag-and-drop изменение порядка задач
- Поиск задач по названию, описанию, исполнителю
- Фильтрация по статусу, приоритету, исполнителю, меткам, дедлайну

### 4.6 Комментарии
- Добавление комментария к задаче
- Редактирование своего комментария
- Удаление своего комментария
- Просмотр комментариев задачи

### 4.7 Вложения
- Загрузка файлов к задаче/комментарию
- Скачивание файлов
- Удаление файлов (автор или owner проекта)
- Ограничение размера файла (например, 10MB)
- Поддержка изображений, документов, архивов

### 4.8 Метки (Tags)
- Создание метки в проекте
- Редактирование метки
- Удаление метки
- Присвоение меток задачам

### 4.9 Уведомления
- Уведомления при назначении задачи
- Уведомления при изменении задачи
- Уведомления при комментировании
- Уведомления при приближении дедлайна
- Уведомления при добавлении в проект
- Просмотр списка уведомлений
- Отметка уведомления как прочитанного
- Отметка всех уведомлений как прочитанных
- Настройки уведомлений (какие получать)

### 4.10 История и активность
- Просмотр истории изменений задачи
- Просмотр ленты активности проекта
- Просмотр общей активности пользователя

### 4.11 Статистика и отчеты
- Статистика по проекту (количество задач по статусам)
- Статистика по пользователю (выполненные задачи, текущие)
- Экспорт задач проекта (CSV, Excel)
- График выполнения задач (burndown chart)

### 4.12 Real-time обновления
- Обновление статуса задач в реальном времени
- Уведомления в реальном времени
- Отображение активных пользователей в проекте
- Индикатор "печатает комментарий"

### 4.13 Поиск
- Глобальный поиск по задачам
- Поиск по проектам
- Поиск по пользователям
- Полнотекстовый поиск с подсветкой совпадений

### 4.14 Административная панель
- Просмотр всех пользователей
- Блокировка/разблокировка пользователей
- Просмотр всех проектов
- Удаление проектов
- Просмотр статистики системы

## 5. API эндпоинты (основные группы)

### 5.1 Аутентификация
- POST /api/auth/register/
- POST /api/auth/login/
- POST /api/auth/logout/
- POST /api/auth/refresh/
- POST /api/auth/password-reset/
- POST /api/auth/password-reset-confirm/
- GET /api/auth/verify-email/{token}/
- POST /api/auth/oauth/google/
- POST /api/auth/oauth/github/

### 5.2 Пользователи
- GET /api/users/me/
- PATCH /api/users/me/
- POST /api/users/me/avatar/
- GET /api/users/{id}/
- GET /api/users/{id}/activity/
- PATCH /api/users/me/password/

### 5.3 Проекты
- GET /api/projects/
- POST /api/projects/
- GET /api/projects/{id}/
- PATCH /api/projects/{id}/
- DELETE /api/projects/{id}/
- GET /api/projects/{id}/statistics/
- POST /api/projects/{id}/export/

### 5.4 Участники проекта
- GET /api/projects/{id}/members/
- POST /api/projects/{id}/members/
- PATCH /api/projects/{id}/members/{user_id}/
- DELETE /api/projects/{id}/members/{user_id}/
- POST /api/projects/{id}/invite/

### 5.5 Задачи
- GET /api/projects/{id}/tasks/
- POST /api/projects/{id}/tasks/
- GET /api/tasks/{id}/
- PATCH /api/tasks/{id}/
- DELETE /api/tasks/{id}/
- POST /api/tasks/{id}/assign/
- PATCH /api/tasks/{id}/status/
- GET /api/tasks/{id}/history/

### 5.6 Комментарии
- GET /api/tasks/{id}/comments/
- POST /api/tasks/{id}/comments/
- PATCH /api/comments/{id}/
- DELETE /api/comments/{id}/

### 5.7 Вложения
- POST /api/tasks/{id}/attachments/
- GET /api/attachments/{id}/
- DELETE /api/attachments/{id}/

### 5.8 Метки
- GET /api/projects/{id}/tags/
- POST /api/projects/{id}/tags/
- PATCH /api/tags/{id}/
- DELETE /api/tags/{id}/

### 5.9 Уведомления
- GET /api/notifications/
- PATCH /api/notifications/{id}/read/
- POST /api/notifications/mark-all-read/
- GET /api/notifications/settings/
- PATCH /api/notifications/settings/

### 5.10 Поиск
- GET /api/search/tasks/?q={query}
- GET /api/search/projects/?q={query}
- GET /api/search/users/?q={query}

### 5.11 WebSocket
- /ws/projects/{id}/ — обновления проекта
- /ws/notifications/ — личные уведомления

---

Это полное ТЗ для реализации. Можно начинать с базового функционала и постепенно добавлять сложные фичи.
